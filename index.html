<script src='js/jquery-1.7.2.min.js'> </script>
<script src='js/bootstrap.min.js'> </script>
<script src='js/pht.js'> </script>
<script src="js/jRecorder.js"> </script>
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
</script>

<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css"/>
<link rel="stylesheet" type="text/css" href="css/bootstrap-responsive.min.css"/>
<link rel="stylesheet" type="text/css" href="css/pht.css"/>

<!DOCTYPE html>
<html lang="en">
<head>
    <title>PowerHourTimer.com</title>
</head>

<body class="day">
    <div id="locationforrecorder" style="border:1px solid grey"></div>

    <script>
       $.jRecorder({ 
            host : 'http://localhost',  
            callback_started_recording:     function(){callback_started(); },
            callback_stopped_recording:     function(){callback_stopped(); },
            callback_activityLevel:          function(level){callback_activityLevel(level); },
            callback_activityTime:     function(time){callback_activityTime(time); },
            swf_path : 'js/jRecorder.swf'
         }, $('#locationforrecorder'));

    </script>

    <div id="audiotags">
        <audio id="dd" src="sounds/myDrink.wav" > </audio>
        <audio id="hd" src="sounds/goodDrink.wav" > </audio>
    </div>

    <div id="formcontainer" class="container">
        <div class="row">
            <div class="span12">
                <div id="browserdisclaimer" class="alert" style="display:none">
                    <strong>Warning!</strong> This site is designed to work on modern browsers, if you're using an old one (i.e. IE) some features might not work.
                </div>

                <h1 id="contTitle">PowerHourTimer.com</h1>
            </div>
        </div>

        <div id="overlay" class="row">
            <div id="silentAlert" class="span12">DRINK!</div>
        </div>  

        <div id="gamedisplay" class="row">

            <div class="span12">
                <div id="countDownSec">0</div>
                <div id="currentDrink">Current Drink:</div>
                <div id="numDrink">0 of 100</div>
                <div class="detailNums">
                    <div id="numBeers">0 of 100 Beers</div>
                    <div id="numOz">0 of 100 oz</div>
                </div>

                <div id="gameButtons">
                    <button id="pausebutton" class="btn" type="button" onclick="togglePause()">Smoke Break</button>
                    <button class="btn" type="button" onclick="stopGame()">Stop.. I give up!</button>
                </div>


            </div>
        </div>

        <div id="formdisplay" class="row">
            <div class="span12">    
                <form class="form-horizontal" id="pregameform" >
                  <fieldset>
                    <legend>Please fill out the form below to start</legend>
                    <div id="numDrinkGroup" class="control-group">
                      <label class="control-label" for="numDrinksToPlay">How Many?</label>
                      <div class="controls">
                        <input id="numDrinksToPlay" type="text" value="60" onkeydown="validateTextInput()" class="input-large" >
                      </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="soundInput">Alert Sound</label>
                        <div class="controls">
                            <select id="soundInput">
                                <option value="hd">Holy drink</option>
                                <option value="dd">Dumb drink</option>
                                <option value="cd">Custom drink</option>
                            </select>
                            <span class="help-inline"><i onclick="playSelectedAudio()" class="icon-play-circle"></i></span>
                        </div>
                    </div>
                    
                    <a id="moreOptionsLink" data-toggle="collapse" href="#moreOptions" onclick="hideElement('moreOptionsLink')">
                        More Options/Record Custom Audio
                    </a>
                     
                    <div id="moreOptions" class="collapse"> 
                        <div class="control-group">
                            <label class="control-label" for="countupdown">Timer Direction</label>
                            <div class="controls">
                                <div class="btn-group" data-toggle="buttons-radio">
                                    <button id="countdownbutton" type="button" class="btn active">Down</button>
                                    <button id="countupbutton" type="button" class="btn">Up</button>
                                </div>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="silentmodecheck">Silent Mode</label>          
                            <div class="controls">
                                <label class="checkbox">
                                    <input id="silentmodecheck" type="checkbox" >
                                    No audio alerts, visual alert on screen
                                </label>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="recordStuff">Custom Audio</label>
                            <div class="controls" style="position:relative">
                                <button type="button" class="btn btn-danger" id="record" style="float:left">Record</button>
                                <button type="button" class="btn btn-inverse" id="stop" style="display:none; float:left">Stop</button>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" id="startbutton" class="btn btn-primary" onclick="startGame()">Start</button>
                    </div>
                  </fieldset>
                </form>

            </div>
        </div>

        <div class="row">
            <div class="span12">
                <div id="socialmedia">
                    <div id="gplus">
                        <g:plusone></g:plusone>
                    </div>
                    <div id="twitter">
                        <a href="https://twitter.com/share" class="twitter-share-button" data-text="Rocking a power hour on PowerHourTimer.com">Tweet</a>
                    </div>
                    <div id="facebook">
                        <iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.powerhourtimer.com&amp;send=false&amp;layout=standard&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=35" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:35px;" allowTransparency="true"></iframe>
                    </div>                    
                </div>
            </div>
        </div>

        <div class="row">
            <div class="span4">
                <h2>About</h2>
                This site was created because I had to write a bash script to do the same thing for a party.  I then realized of course that it would be rather simple to do online and would be a fun side project.  
                <br>
                <br>
                I try to work on the site quite a bit to keep my mind occupied (and off of work <span onClick="debug()">code<span>) so if you have an idea for a cool feature feel free to shoot me an email at <a href="mailto:powerhourtimer@gmail.com">PowerHourTimer@gmail.com</a>
                <br>
                <br>
                Thanks. 
                <br>
                <br>
                -Alex
            </div>
            <div class="span4">
                <h2>How to play?</h2>
                The goal of the game is to drink a shot of your favorite beer (or preferably a light crappy one, don't waste good beer) a minute for x minutes.  The two most infamous goals are 60 (power hour) and 100 (the century).  
                <br>
                <ol>
                    <li>Get lots of beer</li>
                    <li>Fill out the form above (choose your goal)</li>
                    <li>Turn up the volume (or choose silent mode if you wish)</li>
                    <li>Begin!</li>
                    <li>The timer will count 60 second increments and signal you when to drink</li>
                    <li>Go for as long as you can without vomiting</li>
                </ol>
            </div>
            <div class="span4">
                <h2>Disclaimer</h2>
                <h3>Rule #1:  Don't be a MORON</h3>
                This game entails a LOT of drinking and should only be played by:
                <ol>
                    <li>People who are of legal drinking age</li>
                    <li>People who have friends/family around to ensure they end up okay.</li>
                    <li>Seriously DO NOT play alone, it's a bad idea.</li>
                    <li>People who will not be driving for a long time after the game is over.</li>
                </ol>
                <br>

            </div>
        </div>
    </div>
</body>
</html>

<script type="text/javascript">
    $('#record').click(function(){
        $.jRecorder.record(5);
        hideElement('record');
        showElement('stop');
        document.getElementById('stop').innerHTML = 'Stop';
    })

    $('#stop').click(function(){
        $.jRecorder.stop();
        showElement('record');
        setSelectedAudioValue("cd");
        document.getElementById('record').innerHTML = 'Re-Record';
        document.getElementById('stop').innerHTML = 'Replay';
    })

    function callback_finished(){
        $('#status').html('Recording is finished');
    }

    function callback_started(){
        $('#status').html('Recording is started');
    }

    function callback_error(code){
        $('#status').html('Error, code:' + code);
    }

    function callback_stopped(){
        $('#status').html('Stop request is accepted');
    }

    function callback_finished_recording(){
        $('#status').html('Recording event is finished');
    }

    function callback_finished_sending(){
        $('#status').html('File has been sent to server mentioned as host parameter');
    }

    function callback_activityLevel(level){
        $('#level').html(level);

        if(level == -1) {
            $('#levelbar').css("width",  "2px");
        } else {
            $('#levelbar').css("width", (level * 2)+ "px");
        }
    }

    function callback_activityTime(time){ 
        $('#time').html(time);
    }
</script>